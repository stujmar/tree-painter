import { useState, useEffect, useRef } from 'react';
import { getTime, getDate } from '../../utils/dateTimeConverters';

const Counter = () => {
    // let [count, setCount] = useState(Math.floor(Math.random() * (366 - 1) + 1));
    let [speed, setSpeed] = useState(1000);
    let [hour, setHour] = useState(1);
    let [day, setDay] = useState(Math.floor(Math.random() * (366 - 1) + 1));
    let stop = 123456789;

    const changeSpeed = (_speed) => {
      setSpeed(_speed);
    }


    function useInterval(callback, delay) {
        const savedCallback = useRef();
      
        // Remember the latest callback.
        useEffect(() => {
          savedCallback.current = callback;
        }, [callback]);
      
        // Set up the interval.
        useEffect(() => {
          function tick() {
            savedCallback.current();
          }
          if (delay !== null) {
            let id = setInterval(tick, delay);
            return () => clearInterval(id);
          }
        }, [delay]);
    }
    useInterval(() => {
        if (hour < 24) {  // If the time is less than 24 tick forward an hour.
            setHour(hour + 1) 
        } else { // Else we need to reset to 1:00am.
            setHour(1)
        }
        if (hour === 23) { // If we are about to tick over to 12:00am progress the day.
            if (day < 365) { // Most days of the year we just tick forward one day.
                setDay(day + 1);
            } else { // Except on New Year's Eve resest to the first day of the year.
                setDay(1); 
            }
        }

    }, speed); // How many milliseconds it takes for an hour to pass in game.
    return (
    <div className="flex w-screen justify-between px-4 py-2">
      <div className="flex md:flex-col w-max items-start">
        <div>{getDate(day)}</div>
        <div className="ml-2 md:ml-0">{getTime(hour)}</div>
      </div>
      <div className="flex flex-col"> {/*RIGHT SECTION*/}

        <div className="flex  items-start"> {/*SPEED CONTROLS*/}
            <button className="focus:outline-none" type="button" onClick={() => changeSpeed(stop)}>
            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              {/* <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={speed === stop ? 3 : 1} d="M6 18L18 6M6 6l12 12" /> */}
              <line strokeLinecap="round" strokeLinejoin="round" strokeWidth={speed === stop ? 3 : 1} x1="9" y1="5" x2="9" y2="18" />
              <line strokeLinecap="round" strokeLinejoin="round" strokeWidth={speed === stop ? 3 : 1} x1="17" y1="5" x2="17" y2="18" />
            </svg>
            </button>
            <button className="focus:outline-none" type="button" onClick={() => changeSpeed(1000)}>
            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={speed === 1000 ? 3 : 1} d="M9 5l7 7-7 7" />
            </svg>
            </button>
            <button className={`${speed === 500 ? "font-bold": "font-normal"} focus:outline-none`} type="button" onClick={() => changeSpeed(500)}>
              <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={speed === 500 ? 3 : 1} d="M13 5l7 7-7 7M5 5l7 7-7 7" />
              </svg>
            </button>
        </div>

        <div className="mt-2 flex gap-1"> {/* SEASON CONTROLS */}
        <svg className="hover:opacity-75" width="23" height="23" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clipPath="url(#clip0)">
        <path d="M11.0552 8.22599C9.59069 8.6584 8.6501 9.59992 8.21768 11.081C7.80005 10.9489 7.38057 10.8306 6.97125 10.6847C5.76363 10.255 4.65857 9.64427 3.71612 8.76281C3.17375 8.25555 2.72655 7.68362 2.52143 6.95553C2.22484 5.89667 2.45676 4.9302 3.07674 4.05059C3.6727 3.20701 4.4747 2.64986 5.5003 2.45582C6.48709 2.26918 7.36763 2.53344 8.14469 3.14972C8.86908 3.72443 9.42253 4.44789 9.88544 5.24158C10.4204 6.15908 10.7872 7.14402 11.0496 8.17055C11.0543 8.1881 11.0533 8.20566 11.0552 8.22599Z" fill="white"/>
        <path d="M8.2223 12.9355C8.65194 14.4037 9.59254 15.3443 11.0644 15.7777C11.0108 15.9708 10.9609 16.1639 10.9036 16.3551C10.523 17.6311 9.97137 18.8221 9.12594 19.8616C8.71293 20.3698 8.26111 20.8392 7.68363 21.1644C6.69221 21.7225 5.66846 21.7567 4.64933 21.2688C3.48513 20.7117 2.72933 19.7997 2.45953 18.5246C2.27104 17.6348 2.47801 16.8125 2.98988 16.0687C3.4491 15.4007 4.05984 14.887 4.72509 14.4361C5.79135 13.7135 6.97033 13.2515 8.2223 12.9355Z" fill="white"/>
        <path d="M12.9364 15.7674C13.6331 15.5845 14.2346 15.2482 14.74 14.7428C15.2454 14.2374 15.5817 13.6368 15.7665 12.9281C16.0409 13.0076 16.3107 13.0796 16.5777 13.1637C17.8233 13.5582 18.9791 14.1237 19.9816 14.9738C20.4917 15.4062 20.9564 15.8792 21.2539 16.49C21.7963 17.6024 21.6965 18.689 21.0645 19.7229C20.4612 20.7097 19.5899 21.35 18.4368 21.5533C17.4832 21.7215 16.6267 21.4591 15.8737 20.8668C15.0911 20.2524 14.5071 19.4698 14.0239 18.6077C13.5342 17.7336 13.1942 16.8004 12.9456 15.8321C12.9429 15.8164 12.9419 15.7998 12.9364 15.7674Z" fill="white"/>
        <path d="M12.9244 8.2316C13.0113 7.93409 13.0871 7.64673 13.1785 7.364C13.5703 6.15361 14.1219 5.02822 14.9451 4.04789C15.3859 3.52308 15.87 3.04446 16.4946 2.73863C17.4168 2.28774 18.3546 2.28312 19.2832 2.70167C20.2958 3.15811 21.0156 3.91299 21.3935 4.95984C21.8259 6.15915 21.5848 7.25497 20.7818 8.22699C20.124 9.02344 19.2979 9.61201 18.3897 10.0897C17.5831 10.5138 16.7312 10.8215 15.8488 11.0451C15.8248 11.0515 15.8007 11.0562 15.7656 11.0645C15.5845 10.3669 15.2464 9.76077 14.7382 9.25443C14.2337 8.75087 13.6322 8.41455 12.9244 8.2316Z" fill="white"/>
        <path d="M14.9285 11.9995C14.9285 13.6285 13.6165 14.9313 11.9774 14.9313C10.3798 14.9313 9.06224 13.6035 9.06409 11.9958C9.06594 10.3844 10.3844 9.07056 12.0005 9.07056C13.6165 9.07056 14.9276 10.3817 14.9285 11.9995Z" fill="white"/>
        <path d="M2.29696 8.62146C3.78917 10.4481 5.77754 11.4137 8.03294 11.9995C7.79363 12.066 7.58944 12.1205 7.38709 12.1806C5.99744 12.5936 4.70205 13.196 3.56649 14.1126C3.12391 14.4702 2.70998 14.8582 2.36534 15.3128C2.30805 15.3877 2.26 15.3683 2.19533 15.3442C1.16603 14.958 0.495231 14.2225 0.191246 13.1812C-0.201439 11.8396 -0.000938496 10.5914 0.925799 9.50662C1.28984 9.07975 1.76014 8.79609 2.29696 8.62146Z" fill="white"/>
        <path d="M12.0051 8.01446C11.8628 7.5608 11.7362 7.11175 11.581 6.67287C11.1181 5.35899 10.4593 4.15598 9.50391 3.13131C9.25536 2.86428 8.97725 2.62497 8.70283 2.3829C8.63169 2.32007 8.62245 2.27387 8.65294 2.19256C9.01236 1.23995 9.67762 0.586707 10.6293 0.255003C11.933 -0.199588 13.1739 -0.0591452 14.3011 0.769652C14.7982 1.13462 15.1364 1.62802 15.3443 2.20919C15.3646 2.26555 15.3831 2.30898 15.3175 2.36072C14.3446 3.13131 13.6229 4.10424 13.051 5.19545C12.602 6.05104 12.2795 6.9556 12.0374 7.88973C12.0291 7.93038 12.0171 7.97011 12.0051 8.01446Z" fill="white"/>
        <path d="M11.9995 15.9568C12.1797 16.6738 12.394 17.34 12.6675 17.9867C13.196 19.235 13.913 20.3567 14.9054 21.2908C15.0273 21.4063 15.1539 21.519 15.2897 21.6161C15.3766 21.678 15.3701 21.7334 15.3387 21.8156C14.9636 22.7923 14.2724 23.4501 13.2856 23.7726C11.9875 24.1967 10.7623 24.0368 9.65815 23.2044C9.17769 22.8422 8.84968 22.3562 8.64641 21.787C8.62424 21.7251 8.61777 21.6844 8.67875 21.6364C9.53249 20.9628 10.1904 20.1239 10.7318 19.1879C11.2927 18.2177 11.6789 17.1773 11.9598 16.0954C11.9699 16.0603 11.9801 16.0242 11.9995 15.9568Z" fill="white"/>
        <path d="M21.7003 8.61963C22.6399 8.94209 23.3172 9.5593 23.6831 10.4805C24.1996 11.7833 24.0952 13.0427 23.2978 14.2133C22.9254 14.7612 22.4034 15.129 21.7797 15.3535C21.7261 15.3729 21.6873 15.3868 21.6402 15.3267C20.9251 14.4157 20.0242 13.7282 19.018 13.1711C18.0903 12.6574 17.1017 12.2989 16.077 12.0328C16.0502 12.0263 16.0253 12.0161 15.9698 11.9976C18.216 11.4146 20.2034 10.4491 21.7003 8.61963Z" fill="white"/>
        </g>
        <defs>
        <clipPath id="clip0">
        <rect width="24" height="24" fill="white"/>
        </clipPath>
        </defs>
        </svg>

          <svg className="hover:opacity-75" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M16.8021 6.41649C15.5165 5.36816 13.8827 4.73283 12.1057 4.70952C7.84315 4.65456 4.47156 8.07266 4.39328 12.1669C4.34998 14.4034 5.28843 16.4651 6.83309 17.899C7.49008 18.5177 8.27199 19.0314 9.16797 19.3994C13.1175 21.0207 17.5208 19.0872 19.0929 15.2561C20.4102 12.0462 19.3727 8.46735 16.8021 6.41649Z" fill="white"/>
            <path d="M24 11.9896C23.2331 11.286 22.4137 10.6765 21.5052 10.2077C22.2255 9.38667 22.7868 8.45242 23.2564 7.43823C22.1597 7.04437 21.0556 6.78125 19.9223 6.73129C20.2762 5.69878 20.4411 4.62214 20.4902 3.50553C19.4343 3.553 18.4143 3.70204 17.4367 4.01513C17.3368 2.86022 17.0653 1.59289 16.7222 0.967561C15.6972 1.45051 14.7487 2.03171 13.9219 2.77861C13.3881 1.68116 12.5854 0.482115 11.99 0C11.2606 0.797696 10.6285 1.65118 10.1539 2.60126C9.377 1.95011 8.50267 1.43302 7.56422 0.997537C7.24447 1.52628 6.95885 2.93599 6.85643 4.11505C5.79224 3.73285 4.67726 3.55716 3.52814 3.50637C3.42905 4.14336 3.72715 5.64965 4.1027 6.8004C3.07099 6.88617 2.06925 7.14096 1.07918 7.50484C1.32149 8.18763 2.02679 9.27926 2.69794 10.1044C1.70869 10.5849 0.825203 11.2335 0 11.9888C0.542919 12.5949 1.82527 13.4576 2.82534 13.9564C2.11339 14.7757 1.55631 15.6975 1.10083 16.6983C2.06592 17.0489 3.03685 17.2904 4.03692 17.3786C3.70883 18.3812 3.55145 19.417 3.51065 20.4853C4.68142 20.437 5.80556 20.2547 6.88974 19.8633C6.95219 21.0016 7.21615 22.0965 7.61835 23.1732C8.56679 22.731 9.44279 22.2023 10.228 21.5345C10.6985 22.4346 11.3005 23.2448 11.9992 24C12.7636 23.1707 13.4131 22.2805 13.8994 21.2763C14.787 22.0516 16.2509 23.0166 16.813 23.1299C17.1835 22.1073 17.435 21.0665 17.5041 19.9907C18.5933 20.3121 19.9922 20.5636 20.4885 20.4678C20.4435 19.4037 20.287 18.3662 19.9573 17.3645C21.0389 17.2779 22.4978 16.9739 23.2797 16.6192C22.7959 15.5892 22.2122 14.64 21.4603 13.8081C22.3821 13.3094 23.4621 12.5616 24 11.9896ZM19.8632 15.5734C18.1187 19.8225 13.2349 21.9675 8.8549 20.1689C7.86149 19.7609 6.99382 19.1913 6.26521 18.5044C4.55236 16.914 3.51232 14.6275 3.55978 12.147C3.64721 7.60643 7.38686 3.81529 12.1141 3.8769C14.0851 3.90272 15.8962 4.60799 17.3226 5.77039C20.1746 8.04441 21.3245 12.0137 19.8632 15.5734Z" fill="white"/>
          </svg>

        </div>

      </div>
    </div>
      )
 }

export default Counter;
